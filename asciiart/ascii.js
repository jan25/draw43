const unsanit = (text) => {
  return text.replaceAll("&", "\n").replaceAll("*", " ");
};

const decomp = (small) => {
  const parts = small.split(",");
  let large = "";
  for (const p of parts) {
    const sub = p.split(".");
    const [cnt, ch] = [parseInt(sub[0]), sub[1]];
    large += Array(cnt + 1).join(ch); // +1 repeats cnt times
  }
  return large;
};

const sock = (key, blob) => {
  const keyArr = new TextEncoder().encode(key);
  const cnt = keyArr.reduce((a, b) => a + b, 0);
  const bytes = aesjs.utils.hex.toBytes(blob);
  const aesCtr = new aesjs.ModeOfOperation.ctr(keyArr, new aesjs.Counter(cnt));
  const decryptedBytes = aesCtr.decrypt(bytes);
  return aesjs.utils.utf8.fromBytes(decryptedBytes);
};

const err = () => {
  window.location.href = "https://www.google.com/search?q=sorry";
};

const param = (k) => {
  const searchParams = new URLSearchParams(window.location.search);
  return searchParams.has(k) ? searchParams.get(k) : err();
};

const css = (w, h) => {
  const body = document.getElementsByTagName("body")[0];
  if (window.innerWidth < 600) {
    // mobile
    body.style.fontSize = (100 / w) * 1.65 + "vw"; // 1.65 is arbitrary
  } else {
    const charW = window.innerHeight / h + "px";
    body.style.fontSize = charW;
    body.style.lineHeight = charW;
  }
};

window.onload = () => {
  const [a, b] = [param("f"), param("s")];
  try {
    const c = prompt("Enter key");
    const imageChrs = decomp(sock(a + b + c, BLOB));
    css(imageChrs.indexOf("&"), imageChrs.split("&").length);
    document.getElementById("art").innerText = unsanit(imageChrs);
  } catch (e) {
    err();
  }
};

const BLOB =
  "9ba00a29f97b89958c60a2df189098380f5761be6044579e962cf4c6418f12f192f76ce8518f9e86cb3808c4bda31c4d831b485742ddc7be98c8cec3400468a7b11c02691af5ad0e185e7a3b5d933c35523db9401dcb904d98a4e5528a83cf6469c84a8431b6c621aa7d408d3c681bbe878e6eeffc0465ddf8f02d0cc5d04e6fef785c6e352b446ec842f9f2cd242c82fdb53d52af85ce7734a6c7712e8b14c38b90696fe5a16ff6e4598273fd957de05b48e04007f787d9d8ea862191d30ad34f2fa24b9c6a290b839fb453bf8b7d765606a0a0f2722c659fff4d946efb5479753ebefba27913452734b727bf482855fe6bfbfa9d1251fa1b3a21414064546e03c55f8be9ce59e257e6fb54cd386d62c63109cf96842396d2019e5bdfb42c0844f5bffa18dbb00711a20f252adee2d75cc2ceaec0ddbad17547b8f3a83fde8643e33986b8603b1b4aa5f49045ad6b0ff3a9cb0f121dc9bf8a0c311a540fcd4673e68512dffbb98b35d7a7e11caf0ad32650b4a75d0ce558918f4921469c40268a9b584624bdb9c312b6af2f6701f759a65e3b18d3b02f4f5e250431fd218f1dbf848aa1e4f0b8d463fa3ac3fa136df83b88b3688dcb0d0f1fd7684883c9827355e1573c250c3c993587c253ac44dc64ab943088db5be61c580fb89252ed7cc2010ca0191f51f1c10ac0b1b0b5ee4337256ab78494b2a21e795afd38989b0782d11cd0dbe5c2b65100044b58afa24ccb1042dd4caa801c1b9b435548ce0b06c120df849c8bab79859b98455fb58461de832fcb1d9882caed2039b5ec9d3e215cfdf460c79bc20b3d3707f90dca36ecfb3292c624fbe404fb0005c78f11378ec6583f58cb4d6e3d8fcff055dbd024c191e4b7d0ee73c03b9467ba07e7b8cc656ec7a95c2498be665223979653a39675f39039bb0543c12b3c7d9e4bc43ebedb7a02cda8fd65ba085ac31dfabe5200db9dfea800aedf73a3bdc9ff049068d07508e39e1e692228948e75f178b58f3f2663c8faca558eadf7e9176b8764ccfd6111f3f74d407bd302a4a004cef50e1bb964728daf1c28a0c979a89e94b9f91de136e0e7041853ba119e6189135ac5b81a5a61b86be67ae311f7f270a2c73d16921ca905519a17a6cd06a87d7ce47b6dc772d7d3a7d0cfcbca17cdd9085167dbb1fd53be0fe5298f49d90c827ef5c4cb2dc5b9b586b7f45dbe12db47480a03cba9afe8256bc490494230232e1ed557ea8401237c6005f8dc39e27fbf1e161396d22c439e259bf20b6e1da5750ae251c49bed211454883486d2e12d3ecfcfd19701374aba722e28a0b78944bdde0cf1cf0ef5c67c8305792428a3cae4e1cc647c73c39b92eb2ec92117610e2405dbb9517b93751136f60af0bab3b59985f05795e197aa37f84d46de2cb2032116caffc6e6e4bedf8cb5f23a12d51cf3ecd8bb64056cdb511e668f823a39d8c1c554a2b9db1c7e1f260aada78a0b451813759468c2eabad0f369fe4a3b35744d43c16c5b7a5b226cd03baf1941658b2e733f9c49d562f9e70c9201564dec21a8bd3ad3c399a1c1d514c3ec1fe104e79ece03b4e0e736ad488abe8d2143a32e5639d0113b42b44b54d395097d3a4dd3349ad93c6c050d55618844c44693d0c561860abb474c8ff1fa258c7b72b0209670d778972464dfc0aace8accb46976432cb039580bb79ecfb91266feb4f6cdb3e7f95e9d0a7d57ec32abe61d88cdb1e1aa0d7d48850d2d499ffa91af11c1d7cdd550bb2964236acf4347a0a72bfef4adb9074dc3b58ac0c6a84c2749e4e7abaaff96e3b6331800966e6c1bf56f200bf252add43a8373b2e0844baeb4aa3137d711bb2629df15b2c0c6171f5a0ef3a2ef12ecd9196869eead25112a7fa92a59ec2266c377b161435c6b168e5b143ee2fcad0ab22f1181336a704193de4dd9b47f3d4dcfd9846aaae646c395950bd5757598a46ac9462f9746eab501779552580b3ac13bf7292754de99c4bbdd591e8ad31954ce72b3052831d8a6f5e2c19b1ab5de6b7cdbbe93df7e0f8520077dd4080969a5b96717a5e5150dc1633a671e16222c5152c315d50647fd43b22b638d0e4da3eb4ea09849c33e5a60a61fda9ee9af9ca18953ee6a6062989d8602878970319b82f76dcd458918310ce969dd00cb2a69b662c82c5efb18e907fb701464b1bd410a16bcbc1dca6aab78b75db00c6521669a5c63b47570e2273220bdb4ce42d0186495050aad032419aedfa7c3296c98771b42649bb3d2df25c5779a663af5030f3af24d9ecc0336eae8570d8d70f2b5776c99d4d82405a059f4d633496fe0e2f31d0148a23517bb97ac728f431496273182d5d378a4b8e3d92b879f84173fddd74780e1d9da1b05ee67fd1c0e97959a16d68b62fcc0dd052be38545ada22466b1ed76a84b2c3b500eb84633de62816cc0d9de20ef836e6c138f5149a942eef03d4b6c4160571189b3ef58709b95b018e6d104f89790a7f339eefbb412eae4205d6b3be0167548c34ca1ca55122d567b13d9b33ae8c9f56611cb0216908020d4b48cc8133be7cb02051ba64b281d942c42c824fff58e5f0922599e633315f63d733ec1b9d7db7cd3a0de9d1b3f9572d874a7eb0c800439b3c8dbbfb8d87383096667e83fdd3e8503be595ea3960be1a396e7527da68ec20bd267b443b2cceecddc9dbba6c2c187cf37f65182e26c7df60301fb7e5a8780d54c0270940594af732941deb8fd5ca02101600d967e8633bb75f2b9573366f373c8a606c7e7332bcc56aa7ab0f9da9b45c7c378591f51b95fd7dbb7687abb00fb27145b1176cc499217b457458c8e3074b3fdda098aeabbdcb6482a9c4d9c34ccc7c88f428f5159b281b5859b852d2df13066680d27afbeffd96b0a815c448fd3f2f1e289b51e8e08076b86d8574ca86b0314b6f045d6922b5ecac48cbdff835150884a5dc8c0365d915611a9bfeb9311b0aa8a993a9a18a68123aee10f540329c0c0e979cb4021cbd17c3e58a64827b1debc803e5b5ad96a55b140c605d0f993b62b7a6501b3fb3c12bc54a9844f71c616d6e0dacf32998788c0dd7331570452ac966cbd14766c639441eb8e51773266f39ac20d2e41b633c87b028eadc8d0fd9353e9f6a4cec90e981b097cf4209aed9c1eca1426aae6ad126a5218533b1bfe48fd3dad2485913128032b6e4a2fad08b3a955a1726e885b24b994f5494cf3022f30267d0497a2e94a2a1253590cf1c2b5112db0cbe0890b69ab7b9b50309dff16bb7cc50c783be860c98c3d84e1d0c7f91e5b3ec1119b24a2b7b00323839839d9a67fa7e4fbc4f28b5f737afe848b9245a8a33f0c2870b9eef2fc78ef01399f45f34aa675e0c0e309e36b3a31e210f93a577683a64391819a5fb5abf36273ead6e26b2dc8d38fb88a89aa7e7b2d36b136e8a40fd83383191f47ac3afd2417e5917ddcd8be9b40cef222785338a956c929ef0588ae3b2832a8afe21cfd7c3fecccb40b75d5543260ee0881daf5b5143e08522cb85d57667ae7ff880819d6033703f3f24232e8f3d92a8c2eeefb26c3fdee548378cc4b2641ec9a4c3adae72e7df17ccfe0345e83bbbbd14e2ba687f0ce7732161500845bccdb48f6d4e75b182101e563867bbcce2ebd98560fbab14fa85510a151729c5e63f06b666dfb048e386a32dcd6ae6b259c030a29c297cf0a982d023d4730cc9cf9ff5813538ac9a6eafe1f8802f644f7ee78a36cdf0a7d7e69ee7969aac0fd997d1d8b682fd5aea09db82cf3cc326df22895b4a10f1e303594f28957cd2431709cf20bce3f4b866b984cbc475291048111980faeff5964f4b5a94515e0efee7c44fa488efd7b287a13496479b207e5b54d28a705d184368d558a68feecba2c588f2a63cdc53e9f2317835839bd025f856617e86dd9cc723af33fe987d2b59c812a7ac19cc17e6578c8832dd2ed85264e91429135d3b091a04f1a98dff4bcba411512c080a821cc37a872da8d7aaa360146f28e6ef04244e1b1926ef9ece342bc89ff83289cbbde2178a13e3e7accdf938ad76b2aa8a0bf8e63e48cbb807c3d1e985a665f4a3416c6998e695fe44cb0cadf484d04f0fca2b967e4435e7a50f46f34e19c33b9e3b61482cca025bd7235690de2f9e962d5a2f1398cdf8ea057af2820b3ee8a385e2b76acc57e49ce15569422d9271137d576be530c58bf55049d8dfa78443d6e20c22edc0691c749c64f67184e16e4a2e34fb5203a72bb23a7d7550b47194e384a97e641ed8e991f6dd808669bbc2b0f61db20ac971e5458110759c9595482ff587d68ce59fb47f5cc3e54309fcee4d48d051e0d8f199003822dbc163bdc79b0da8ddf2546d4ac5f017427543654e47c09ea990a8025b33a13cba36682e3bc31b216cff32476bbe6bcc17695144008464bea0230ca8aeb74a95e17a39f5b829fce16622869532483769978479a46a2de46e9e5446d3aad711441ce3a1ac872a2ad3c271021b289b67924baa54b2ae3ed1bd7af81237bdce6479cb193efa34a1cb0982e913f1f89d4d4533ea7dbdb2a954b048be4d08cd228e4296b51700b40d8f34079618de7a93606014c60f3ae185a4bcc39b4017469eafd84de545e8024e4b5fd717567ca6401e79b4b496f6adef303cf5af5f1044ee1a5ee62afc2713fc4c76e4d4b30b411e6397fdb8876c50d20b60c2bfdadd79074061dd5e416bf1db598570c37abbb348a2c400df1bdb180a13d4558cf39c5945e639c22e4985c6887831b635a4a8cc78a308ed130fc7a8f7fb85effd54998fc2584e1cffedea57833e21f4c6c9fa477f4e4591f25360af9de898685c3be11a35b210a024e5de24caf2db950ef57c83cb17ee915e3499f4d58ff66519de604fb00f054db6a7636f9d7b7383156911173c90186b4eaf3f4d31bfc0ecbeb096610fea9bb3e10e6d451dadd38c98e2c420a0a734a3a5539a678a3db4589f62d0723f81b752e1241dab6036b0e20ab3db20adb63fa17140ca710b1720b599829f9b433166b83393dacc60525983f224340e9938d71bb6305acac6b0d850004f4b894e0a052ab2eec1e63938f9c02";
